import{a as t}from"./chunks/theme.r_ZMMF3o.js";import{d as r,f as g,a1 as e,H as o,k as n,V as d,N as y,ac as F,G as u,K as l,L as B,W as C,X as m,_ as f}from"./chunks/framework.d6SjVawx.js";const h=a=>(C("data-v-e661cdad"),a=a(),m(),a),b=h(()=>d("h2",{id:"示例",tabindex:"-1"},[l("示例 "),d("a",{class:"header-anchor",href:"#示例","aria-label":'Permalink to "示例"'},"​")],-1)),D={class:"info custom-block"},_=h(()=>d("p",{class:"custom-block-title"},"模拟请求：",-1)),A=F(`<h2 id="代码" tabindex="-1" data-v-e661cdad>代码 <a class="header-anchor" href="#代码" aria-label="Permalink to &quot;代码&quot;" data-v-e661cdad>​</a></h2><div class="info custom-block" data-v-e661cdad><p class="custom-block-title" data-v-e661cdad>一、三种状态</p><div class="language- vp-adaptive-theme" data-v-e661cdad><button title="Copy Code" class="copy" data-v-e661cdad></button><span class="lang" data-v-e661cdad></span><pre class="shiki shiki-themes github-light github-dark vp-code" data-v-e661cdad><code data-v-e661cdad><span class="line" data-v-e661cdad><span data-v-e661cdad>等待中（pending）：初始状态，既没有被兑现，也没有被拒绝   常见于（网络请求，网速慢的情况下）。</span></span>
<span class="line" data-v-e661cdad><span data-v-e661cdad>已兑现（fulfilled）：意味着操作成功完成   常见于（网络请求成功的情况下）。</span></span>
<span class="line" data-v-e661cdad><span data-v-e661cdad>已拒绝（rejected）：意味着操作失败   常见于（网络请求失败的情况下）</span></span></code></pre></div></div><div class="info custom-block" data-v-e661cdad><p class="custom-block-title" data-v-e661cdad>二、链式调用</p><div class="language-js vp-adaptive-theme" data-v-e661cdad><button title="Copy Code" class="copy" data-v-e661cdad></button><span class="lang" data-v-e661cdad>js</span><pre class="shiki shiki-themes github-light github-dark vp-code" data-v-e661cdad><code data-v-e661cdad><span class="line" data-v-e661cdad><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-e661cdad>Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-e661cdad>prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-e661cdad>then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>()</span></span>
<span class="line" data-v-e661cdad><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>    （常见于）接口返回code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-e661cdad>==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>200也只有接口返回状态是200才会进入.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-e661cdad>then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>()</span></span>
<span class="line" data-v-e661cdad></span>
<span class="line" data-v-e661cdad><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-e661cdad>Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-e661cdad>prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-e661cdad>catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>()</span></span>
<span class="line" data-v-e661cdad><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>    （常见于）接口返回code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-e661cdad>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>200.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-e661cdad>catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>()</span></span>
<span class="line" data-v-e661cdad></span>
<span class="line" data-v-e661cdad><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-e661cdad>Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-e661cdad>prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-e661cdad>finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>()</span></span>
<span class="line" data-v-e661cdad><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>    （现在比较流行做节流处理）接口返回失败和成功都会进入.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-e661cdad>finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>()</span></span></code></pre></div></div><details class="details custom-block" data-v-e661cdad><summary data-v-e661cdad>源代码</summary><div class="language-js vp-adaptive-theme" data-v-e661cdad><button title="Copy Code" class="copy" data-v-e661cdad></button><span class="lang" data-v-e661cdad>js</span><pre class="shiki shiki-themes github-light github-dark vp-code" data-v-e661cdad><code data-v-e661cdad><span class="line" data-v-e661cdad><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>接口请求示范</span></span>
<span class="line" data-v-e661cdad><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-e661cdad>a-button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-e661cdad> type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-e661cdad>=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-e661cdad>&quot;primary&quot;</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;" data-v-e661cdad> :loading=&quot;disabled&quot;</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;" data-v-e661cdad> @click=&quot;newButton&quot;&gt;{{</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-e661cdad> disabled</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;" data-v-e661cdad> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-e661cdad> &#39;等待请求中...&#39;</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;" data-v-e661cdad> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-e661cdad> &#39;模拟请求&#39;</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;" data-v-e661cdad> }}&lt;/a-button&gt;</span></span>
<span class="line" data-v-e661cdad></span>
<span class="line" data-v-e661cdad><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-e661cdad>function</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;" data-v-e661cdad> newButton()</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad> {</span></span>
<span class="line" data-v-e661cdad><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-e661cdad>    // 开启阀门，只有按钮事件执行完毕才会继续执行</span></span>
<span class="line" data-v-e661cdad><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>    disabled.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-e661cdad>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-e661cdad> true</span></span>
<span class="line" data-v-e661cdad><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-e661cdad>    getDataQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>()</span></span>
<span class="line" data-v-e661cdad><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>        .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-e661cdad>then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-e661cdad>res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-e661cdad> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad> {</span></span>
<span class="line" data-v-e661cdad><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>            ElMessage.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-e661cdad>success</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>(res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-e661cdad>as</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-e661cdad> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>)</span></span>
<span class="line" data-v-e661cdad><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>        })</span></span>
<span class="line" data-v-e661cdad><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>        .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-e661cdad>catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-e661cdad>=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad> {</span></span>
<span class="line" data-v-e661cdad><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>            ElMessage.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-e661cdad>error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-e661cdad>&#39;接口请求失败&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>)</span></span>
<span class="line" data-v-e661cdad><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>        })</span></span>
<span class="line" data-v-e661cdad><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>        .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-e661cdad>finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-e661cdad>=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad> {</span></span>
<span class="line" data-v-e661cdad><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>            disabled.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-e661cdad>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-e661cdad> false</span></span>
<span class="line" data-v-e661cdad><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>        })</span></span>
<span class="line" data-v-e661cdad><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>}</span></span>
<span class="line" data-v-e661cdad></span>
<span class="line" data-v-e661cdad><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-e661cdad>function</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;" data-v-e661cdad> getDataQuery()</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad> {</span></span>
<span class="line" data-v-e661cdad><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>    return </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-e661cdad>new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-e661cdad> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-e661cdad>resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-e661cdad>reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-e661cdad>=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad> {</span></span>
<span class="line" data-v-e661cdad><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-e661cdad>        setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-e661cdad>=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad> {</span></span>
<span class="line" data-v-e661cdad><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-e661cdad>            resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-e661cdad>&#39;接口请求成功&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>)</span></span>
<span class="line" data-v-e661cdad><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>        }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-e661cdad>2000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>)</span></span>
<span class="line" data-v-e661cdad><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>    })</span></span>
<span class="line" data-v-e661cdad><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-e661cdad>}</span></span></code></pre></div></details>`,4),x=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"web/basics/codePromise.md","filePath":"web/basics/codePromise.md"}'),P={name:"web/basics/codePromise.md"},w=r({...P,setup(a){const s=g(!1);function k(){s.value=!0,p().then(i=>{t.success(i)}).catch(()=>{t.error("接口请求失败")}).finally(()=>{s.value=!1})}function p(){return new Promise((i,c)=>{setTimeout(()=>{i("接口请求成功")},2e3)})}return(i,c)=>{const E=e("c-title"),v=e("a-button");return u(),o("div",null,[n(E,{title:"Promise理解"}),b,d("div",D,[_,n(v,{type:"primary",loading:s.value,onClick:k},{default:y(()=>[l(B(s.value?"等待请求中...":"模拟请求"),1)]),_:1},8,["loading"])]),A])}}}),N=f(w,[["__scopeId","data-v-e661cdad"]]);export{x as __pageData,N as default};
