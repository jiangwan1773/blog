import{a as n}from"./chunks/theme.C1mTzYq5.js";import{d as p,f as E,H as r,U as a,k as v,N as o,al as c,a0 as g,G as y,K as f,L as F,V as u,W as m,_ as B}from"./chunks/framework.Dt0boiFn.js";const e=s=>(u("data-v-9f62ffe2"),s=s(),m(),s),C=e(()=>a("h1",{id:"promise理解",tabindex:"-1"},[f("Promise理解 "),a("a",{class:"header-anchor",href:"#promise理解","aria-label":'Permalink to "Promise理解"'},"​")],-1)),b=e(()=>a("h2",{id:"示例",tabindex:"-1"},[f("示例 "),a("a",{class:"header-anchor",href:"#示例","aria-label":'Permalink to "示例"'},"​")],-1)),D={class:"info custom-block"},_=e(()=>a("p",{class:"custom-block-title"},"模拟请求：",-1)),A=c(`<h2 id="代码" tabindex="-1" data-v-9f62ffe2>代码 <a class="header-anchor" href="#代码" aria-label="Permalink to &quot;代码&quot;" data-v-9f62ffe2>​</a></h2><div class="info custom-block" data-v-9f62ffe2><p class="custom-block-title" data-v-9f62ffe2>一、三种状态</p><div class="language- vp-adaptive-theme" data-v-9f62ffe2><button title="Copy Code" class="copy" data-v-9f62ffe2></button><span class="lang" data-v-9f62ffe2></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" data-v-9f62ffe2><code data-v-9f62ffe2><span class="line" data-v-9f62ffe2><span data-v-9f62ffe2>等待中（pending）：初始状态，既没有被兑现，也没有被拒绝   常见于（网络请求，网速慢的情况下）。</span></span>
<span class="line" data-v-9f62ffe2><span data-v-9f62ffe2>已兑现（fulfilled）：意味着操作成功完成   常见于（网络请求成功的情况下）。</span></span>
<span class="line" data-v-9f62ffe2><span data-v-9f62ffe2>已拒绝（rejected）：意味着操作失败   常见于（网络请求失败的情况下）</span></span></code></pre></div></div><div class="info custom-block" data-v-9f62ffe2><p class="custom-block-title" data-v-9f62ffe2>二、链式调用</p><div class="language-js vp-adaptive-theme" data-v-9f62ffe2><button title="Copy Code" class="copy" data-v-9f62ffe2></button><span class="lang" data-v-9f62ffe2>js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" data-v-9f62ffe2><code data-v-9f62ffe2><span class="line" data-v-9f62ffe2><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-9f62ffe2>Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-9f62ffe2>prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-9f62ffe2>then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>()</span></span>
<span class="line" data-v-9f62ffe2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>    （常见于）接口返回code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-9f62ffe2>==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>200也只有接口返回状态是200才会进入.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-9f62ffe2>then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>()</span></span>
<span class="line" data-v-9f62ffe2></span>
<span class="line" data-v-9f62ffe2><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-9f62ffe2>Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-9f62ffe2>prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-9f62ffe2>catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>()</span></span>
<span class="line" data-v-9f62ffe2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>    （常见于）接口返回code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-9f62ffe2>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>200.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-9f62ffe2>catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>()</span></span>
<span class="line" data-v-9f62ffe2></span>
<span class="line" data-v-9f62ffe2><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-9f62ffe2>Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-9f62ffe2>prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-9f62ffe2>finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>()</span></span>
<span class="line" data-v-9f62ffe2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>    （现在比较流行做节流处理）接口返回失败和成功都会进入.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-9f62ffe2>finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>()</span></span></code></pre></div></div><details class="details custom-block" data-v-9f62ffe2><summary data-v-9f62ffe2>源代码</summary><div class="language-js vp-adaptive-theme" data-v-9f62ffe2><button title="Copy Code" class="copy" data-v-9f62ffe2></button><span class="lang" data-v-9f62ffe2>js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" data-v-9f62ffe2><code data-v-9f62ffe2><span class="line" data-v-9f62ffe2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>接口请求示范</span></span>
<span class="line" data-v-9f62ffe2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-9f62ffe2>a-button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-9f62ffe2> type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-9f62ffe2>=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-9f62ffe2>&quot;primary&quot;</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;" data-v-9f62ffe2> :loading=&quot;disabled&quot;</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;" data-v-9f62ffe2> @click=&quot;newButton&quot;&gt;{{</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-9f62ffe2> disabled</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;" data-v-9f62ffe2> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-9f62ffe2> &#39;等待请求中...&#39;</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;" data-v-9f62ffe2> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-9f62ffe2> &#39;模拟请求&#39;</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;" data-v-9f62ffe2> }}&lt;/a-button&gt;</span></span>
<span class="line" data-v-9f62ffe2></span>
<span class="line" data-v-9f62ffe2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-9f62ffe2>function</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;" data-v-9f62ffe2> newButton()</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2> {</span></span>
<span class="line" data-v-9f62ffe2><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-9f62ffe2>    // 开启阀门，只有按钮事件执行完毕才会继续执行</span></span>
<span class="line" data-v-9f62ffe2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>    disabled.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-9f62ffe2>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-9f62ffe2> true</span></span>
<span class="line" data-v-9f62ffe2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-9f62ffe2>    getDataQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>()</span></span>
<span class="line" data-v-9f62ffe2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>        .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-9f62ffe2>then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-9f62ffe2>res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-9f62ffe2> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2> {</span></span>
<span class="line" data-v-9f62ffe2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>            ElMessage.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-9f62ffe2>success</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>(res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-9f62ffe2>as</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-9f62ffe2> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>)</span></span>
<span class="line" data-v-9f62ffe2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>        })</span></span>
<span class="line" data-v-9f62ffe2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>        .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-9f62ffe2>catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-9f62ffe2>=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2> {</span></span>
<span class="line" data-v-9f62ffe2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>            ElMessage.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-9f62ffe2>error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-9f62ffe2>&#39;接口请求失败&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>)</span></span>
<span class="line" data-v-9f62ffe2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>        })</span></span>
<span class="line" data-v-9f62ffe2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>        .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-9f62ffe2>finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-9f62ffe2>=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2> {</span></span>
<span class="line" data-v-9f62ffe2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>            disabled.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-9f62ffe2>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-9f62ffe2> false</span></span>
<span class="line" data-v-9f62ffe2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>        })</span></span>
<span class="line" data-v-9f62ffe2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>}</span></span>
<span class="line" data-v-9f62ffe2></span>
<span class="line" data-v-9f62ffe2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-9f62ffe2>function</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;" data-v-9f62ffe2> getDataQuery()</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2> {</span></span>
<span class="line" data-v-9f62ffe2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>    return </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-9f62ffe2>new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-9f62ffe2> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-9f62ffe2>resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-9f62ffe2>reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-9f62ffe2>=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2> {</span></span>
<span class="line" data-v-9f62ffe2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-9f62ffe2>        setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-9f62ffe2>=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2> {</span></span>
<span class="line" data-v-9f62ffe2><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-9f62ffe2>            resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-9f62ffe2>&#39;接口请求成功&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>)</span></span>
<span class="line" data-v-9f62ffe2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>        }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-9f62ffe2>2000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>)</span></span>
<span class="line" data-v-9f62ffe2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>    })</span></span>
<span class="line" data-v-9f62ffe2><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-9f62ffe2>}</span></span></code></pre></div></details>`,4),j=JSON.parse('{"title":"Promise理解","description":"Promise理解","frontmatter":{"title":"Promise理解","description":"Promise理解","head":[["meta",{"name":"keywords","content":"promise"}]]},"headers":[],"relativePath":"web/basics/codePromise.md","filePath":"web/basics/codePromise.md","lastUpdated":1718388935000}'),P={name:"web/basics/codePromise.md"},w=p({...P,setup(s){const i=E(!1);function l(){i.value=!0,h().then(t=>{n.success(t)}).catch(()=>{n.error("接口请求失败")}).finally(()=>{i.value=!1})}function h(){return new Promise((t,d)=>{setTimeout(()=>{t("接口请求成功")},2e3)})}return(t,d)=>{const k=g("a-button");return y(),r("div",null,[C,b,a("div",D,[_,v(k,{type:"primary",loading:i.value,onClick:l},{default:o(()=>[f(F(i.value?"等待请求中...":"模拟请求"),1)]),_:1},8,["loading"])]),A])}}}),N=B(w,[["__scopeId","data-v-9f62ffe2"]]);export{j as __pageData,N as default};
