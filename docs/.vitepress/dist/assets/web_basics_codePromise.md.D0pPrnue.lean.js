import{a as d}from"./chunks/theme.BmzNL_5E.js";import{d as r,f as v,H as o,k as n,V as t,N as g,am as y,a1 as l,G as F,K as h,L as u,W as B,X as C,_ as m}from"./chunks/framework.2MLJsAWF.js";const f=a=>(B("data-v-42cffda1"),a=a(),C(),a),b=f(()=>t("h2",{id:"示例",tabindex:"-1"},[h("示例 "),t("a",{class:"header-anchor",href:"#示例","aria-label":'Permalink to "示例"'},"​")],-1)),D={class:"info custom-block"},_=f(()=>t("p",{class:"custom-block-title"},"模拟请求：",-1)),A=y(`<h2 id="代码" tabindex="-1" data-v-42cffda1>代码 <a class="header-anchor" href="#代码" aria-label="Permalink to &quot;代码&quot;" data-v-42cffda1>​</a></h2><div class="info custom-block" data-v-42cffda1><p class="custom-block-title" data-v-42cffda1>一、三种状态</p><div class="language- vp-adaptive-theme" data-v-42cffda1><button title="Copy Code" class="copy" data-v-42cffda1></button><span class="lang" data-v-42cffda1></span><pre class="shiki shiki-themes github-light github-dark vp-code" data-v-42cffda1><code data-v-42cffda1><span class="line" data-v-42cffda1><span data-v-42cffda1>等待中（pending）：初始状态，既没有被兑现，也没有被拒绝   常见于（网络请求，网速慢的情况下）。</span></span>
<span class="line" data-v-42cffda1><span data-v-42cffda1>已兑现（fulfilled）：意味着操作成功完成   常见于（网络请求成功的情况下）。</span></span>
<span class="line" data-v-42cffda1><span data-v-42cffda1>已拒绝（rejected）：意味着操作失败   常见于（网络请求失败的情况下）</span></span></code></pre></div></div><div class="info custom-block" data-v-42cffda1><p class="custom-block-title" data-v-42cffda1>二、链式调用</p><div class="language-js vp-adaptive-theme" data-v-42cffda1><button title="Copy Code" class="copy" data-v-42cffda1></button><span class="lang" data-v-42cffda1>js</span><pre class="shiki shiki-themes github-light github-dark vp-code" data-v-42cffda1><code data-v-42cffda1><span class="line" data-v-42cffda1><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-42cffda1>Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-42cffda1>prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-42cffda1>then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>()</span></span>
<span class="line" data-v-42cffda1><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>    （常见于）接口返回code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-42cffda1>==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>200也只有接口返回状态是200才会进入.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-42cffda1>then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>()</span></span>
<span class="line" data-v-42cffda1></span>
<span class="line" data-v-42cffda1><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-42cffda1>Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-42cffda1>prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-42cffda1>catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>()</span></span>
<span class="line" data-v-42cffda1><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>    （常见于）接口返回code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-42cffda1>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>200.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-42cffda1>catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>()</span></span>
<span class="line" data-v-42cffda1></span>
<span class="line" data-v-42cffda1><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-42cffda1>Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-42cffda1>prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-42cffda1>finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>()</span></span>
<span class="line" data-v-42cffda1><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>    （现在比较流行做节流处理）接口返回失败和成功都会进入.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-42cffda1>finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>()</span></span></code></pre></div></div><details class="details custom-block" data-v-42cffda1><summary data-v-42cffda1>源代码</summary><div class="language-js vp-adaptive-theme" data-v-42cffda1><button title="Copy Code" class="copy" data-v-42cffda1></button><span class="lang" data-v-42cffda1>js</span><pre class="shiki shiki-themes github-light github-dark vp-code" data-v-42cffda1><code data-v-42cffda1><span class="line" data-v-42cffda1><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>接口请求示范</span></span>
<span class="line" data-v-42cffda1><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-42cffda1>a-button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-42cffda1> type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-42cffda1>=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-42cffda1>&quot;primary&quot;</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;" data-v-42cffda1> :loading=&quot;disabled&quot;</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;" data-v-42cffda1> @click=&quot;newButton&quot;&gt;{{</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-42cffda1> disabled</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;" data-v-42cffda1> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-42cffda1> &#39;等待请求中...&#39;</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;" data-v-42cffda1> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-42cffda1> &#39;模拟请求&#39;</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;" data-v-42cffda1> }}&lt;/a-button&gt;</span></span>
<span class="line" data-v-42cffda1></span>
<span class="line" data-v-42cffda1><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-42cffda1>function</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;" data-v-42cffda1> newButton()</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1> {</span></span>
<span class="line" data-v-42cffda1><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-42cffda1>    // 开启阀门，只有按钮事件执行完毕才会继续执行</span></span>
<span class="line" data-v-42cffda1><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>    disabled.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-42cffda1>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-42cffda1> true</span></span>
<span class="line" data-v-42cffda1><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-42cffda1>    getDataQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>()</span></span>
<span class="line" data-v-42cffda1><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>        .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-42cffda1>then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-42cffda1>res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-42cffda1> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1> {</span></span>
<span class="line" data-v-42cffda1><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>            ElMessage.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-42cffda1>success</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>(res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-42cffda1>as</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-42cffda1> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>)</span></span>
<span class="line" data-v-42cffda1><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>        })</span></span>
<span class="line" data-v-42cffda1><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>        .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-42cffda1>catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-42cffda1>=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1> {</span></span>
<span class="line" data-v-42cffda1><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>            ElMessage.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-42cffda1>error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-42cffda1>&#39;接口请求失败&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>)</span></span>
<span class="line" data-v-42cffda1><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>        })</span></span>
<span class="line" data-v-42cffda1><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>        .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-42cffda1>finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-42cffda1>=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1> {</span></span>
<span class="line" data-v-42cffda1><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>            disabled.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-42cffda1>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-42cffda1> false</span></span>
<span class="line" data-v-42cffda1><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>        })</span></span>
<span class="line" data-v-42cffda1><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>}</span></span>
<span class="line" data-v-42cffda1></span>
<span class="line" data-v-42cffda1><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-42cffda1>function</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;" data-v-42cffda1> getDataQuery()</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1> {</span></span>
<span class="line" data-v-42cffda1><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>    return </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-42cffda1>new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-42cffda1> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-42cffda1>resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-42cffda1>reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-42cffda1>=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1> {</span></span>
<span class="line" data-v-42cffda1><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-42cffda1>        setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-42cffda1>=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1> {</span></span>
<span class="line" data-v-42cffda1><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-42cffda1>            resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-42cffda1>&#39;接口请求成功&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>)</span></span>
<span class="line" data-v-42cffda1><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>        }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-42cffda1>2000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>)</span></span>
<span class="line" data-v-42cffda1><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>    })</span></span>
<span class="line" data-v-42cffda1><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-42cffda1>}</span></span></code></pre></div></details>`,4),x=JSON.parse('{"title":"Promise理解","description":"Promise理解","frontmatter":{"title":"Promise理解","description":"Promise理解"},"headers":[],"relativePath":"web/basics/codePromise.md","filePath":"web/basics/codePromise.md"}'),P={name:"web/basics/codePromise.md"},w=r({...P,setup(a){const s=v(!1);function k(){s.value=!0,p().then(i=>{d.success(i)}).catch(()=>{d.error("接口请求失败")}).finally(()=>{s.value=!1})}function p(){return new Promise((i,e)=>{setTimeout(()=>{i("接口请求成功")},2e3)})}return(i,e)=>{const c=l("c-title"),E=l("a-button");return F(),o("div",null,[n(c,{title:"Promise理解"}),b,t("div",D,[_,n(E,{type:"primary",loading:s.value,onClick:k},{default:g(()=>[h(u(s.value?"等待请求中...":"模拟请求"),1)]),_:1},8,["loading"])]),A])}}}),N=m(w,[["__scopeId","data-v-42cffda1"]]);export{x as __pageData,N as default};
