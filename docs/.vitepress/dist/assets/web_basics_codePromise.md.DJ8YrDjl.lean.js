import{a as n}from"./chunks/theme.DIt8sTcD.js";import{d as E,f as r,H as v,V as a,k as o,N as c,am as g,a1 as y,G as F,K as t,L as u,W as B,X as C,_ as m}from"./chunks/framework.2MLJsAWF.js";const e=s=>(B("data-v-231d18ed"),s=s(),C(),s),f=e(()=>a("h1",{id:"promise理解",tabindex:"-1"},[t("Promise理解 "),a("a",{class:"header-anchor",href:"#promise理解","aria-label":'Permalink to "Promise理解"'},"​")],-1)),b=e(()=>a("h2",{id:"示例",tabindex:"-1"},[t("示例 "),a("a",{class:"header-anchor",href:"#示例","aria-label":'Permalink to "示例"'},"​")],-1)),D={class:"info custom-block"},_=e(()=>a("p",{class:"custom-block-title"},"模拟请求：",-1)),A=g(`<h2 id="代码" tabindex="-1" data-v-231d18ed>代码 <a class="header-anchor" href="#代码" aria-label="Permalink to &quot;代码&quot;" data-v-231d18ed>​</a></h2><div class="info custom-block" data-v-231d18ed><p class="custom-block-title" data-v-231d18ed>一、三种状态</p><div class="language- vp-adaptive-theme" data-v-231d18ed><button title="Copy Code" class="copy" data-v-231d18ed></button><span class="lang" data-v-231d18ed></span><pre class="shiki shiki-themes github-light github-dark vp-code" data-v-231d18ed><code data-v-231d18ed><span class="line" data-v-231d18ed><span data-v-231d18ed>等待中（pending）：初始状态，既没有被兑现，也没有被拒绝   常见于（网络请求，网速慢的情况下）。</span></span>
<span class="line" data-v-231d18ed><span data-v-231d18ed>已兑现（fulfilled）：意味着操作成功完成   常见于（网络请求成功的情况下）。</span></span>
<span class="line" data-v-231d18ed><span data-v-231d18ed>已拒绝（rejected）：意味着操作失败   常见于（网络请求失败的情况下）</span></span></code></pre></div></div><div class="info custom-block" data-v-231d18ed><p class="custom-block-title" data-v-231d18ed>二、链式调用</p><div class="language-js vp-adaptive-theme" data-v-231d18ed><button title="Copy Code" class="copy" data-v-231d18ed></button><span class="lang" data-v-231d18ed>js</span><pre class="shiki shiki-themes github-light github-dark vp-code" data-v-231d18ed><code data-v-231d18ed><span class="line" data-v-231d18ed><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-231d18ed>Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-231d18ed>prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-231d18ed>then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>()</span></span>
<span class="line" data-v-231d18ed><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>    （常见于）接口返回code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-231d18ed>==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>200也只有接口返回状态是200才会进入.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-231d18ed>then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>()</span></span>
<span class="line" data-v-231d18ed></span>
<span class="line" data-v-231d18ed><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-231d18ed>Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-231d18ed>prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-231d18ed>catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>()</span></span>
<span class="line" data-v-231d18ed><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>    （常见于）接口返回code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-231d18ed>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>200.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-231d18ed>catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>()</span></span>
<span class="line" data-v-231d18ed></span>
<span class="line" data-v-231d18ed><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-231d18ed>Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-231d18ed>prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-231d18ed>finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>()</span></span>
<span class="line" data-v-231d18ed><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>    （现在比较流行做节流处理）接口返回失败和成功都会进入.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-231d18ed>finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>()</span></span></code></pre></div></div><details class="details custom-block" data-v-231d18ed><summary data-v-231d18ed>源代码</summary><div class="language-js vp-adaptive-theme" data-v-231d18ed><button title="Copy Code" class="copy" data-v-231d18ed></button><span class="lang" data-v-231d18ed>js</span><pre class="shiki shiki-themes github-light github-dark vp-code" data-v-231d18ed><code data-v-231d18ed><span class="line" data-v-231d18ed><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>接口请求示范</span></span>
<span class="line" data-v-231d18ed><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-231d18ed>a-button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-231d18ed> type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-231d18ed>=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-231d18ed>&quot;primary&quot;</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;" data-v-231d18ed> :loading=&quot;disabled&quot;</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;" data-v-231d18ed> @click=&quot;newButton&quot;&gt;{{</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-231d18ed> disabled</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;" data-v-231d18ed> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-231d18ed> &#39;等待请求中...&#39;</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;" data-v-231d18ed> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-231d18ed> &#39;模拟请求&#39;</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;" data-v-231d18ed> }}&lt;/a-button&gt;</span></span>
<span class="line" data-v-231d18ed></span>
<span class="line" data-v-231d18ed><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-231d18ed>function</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;" data-v-231d18ed> newButton()</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed> {</span></span>
<span class="line" data-v-231d18ed><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-231d18ed>    // 开启阀门，只有按钮事件执行完毕才会继续执行</span></span>
<span class="line" data-v-231d18ed><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>    disabled.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-231d18ed>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-231d18ed> true</span></span>
<span class="line" data-v-231d18ed><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-231d18ed>    getDataQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>()</span></span>
<span class="line" data-v-231d18ed><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>        .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-231d18ed>then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-231d18ed>res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-231d18ed> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed> {</span></span>
<span class="line" data-v-231d18ed><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>            ElMessage.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-231d18ed>success</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>(res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-231d18ed>as</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-231d18ed> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>)</span></span>
<span class="line" data-v-231d18ed><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>        })</span></span>
<span class="line" data-v-231d18ed><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>        .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-231d18ed>catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-231d18ed>=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed> {</span></span>
<span class="line" data-v-231d18ed><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>            ElMessage.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-231d18ed>error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-231d18ed>&#39;接口请求失败&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>)</span></span>
<span class="line" data-v-231d18ed><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>        })</span></span>
<span class="line" data-v-231d18ed><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>        .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-231d18ed>finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-231d18ed>=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed> {</span></span>
<span class="line" data-v-231d18ed><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>            disabled.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-231d18ed>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-231d18ed> false</span></span>
<span class="line" data-v-231d18ed><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>        })</span></span>
<span class="line" data-v-231d18ed><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>}</span></span>
<span class="line" data-v-231d18ed></span>
<span class="line" data-v-231d18ed><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-231d18ed>function</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;" data-v-231d18ed> getDataQuery()</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed> {</span></span>
<span class="line" data-v-231d18ed><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>    return </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-231d18ed>new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-231d18ed> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-231d18ed>resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-231d18ed>reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-231d18ed>=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed> {</span></span>
<span class="line" data-v-231d18ed><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-231d18ed>        setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-231d18ed>=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed> {</span></span>
<span class="line" data-v-231d18ed><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-231d18ed>            resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-231d18ed>&#39;接口请求成功&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>)</span></span>
<span class="line" data-v-231d18ed><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>        }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-231d18ed>2000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>)</span></span>
<span class="line" data-v-231d18ed><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>    })</span></span>
<span class="line" data-v-231d18ed><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-231d18ed>}</span></span></code></pre></div></details>`,4),j=JSON.parse('{"title":"Promise理解","description":"Promise理解","frontmatter":{"title":"Promise理解","description":"Promise理解"},"headers":[],"relativePath":"web/basics/codePromise.md","filePath":"web/basics/codePromise.md"}'),P={name:"web/basics/codePromise.md"},w=E({...P,setup(s){const i=r(!1);function l(){i.value=!0,h().then(d=>{n.success(d)}).catch(()=>{n.error("接口请求失败")}).finally(()=>{i.value=!1})}function h(){return new Promise((d,k)=>{setTimeout(()=>{d("接口请求成功")},2e3)})}return(d,k)=>{const p=y("a-button");return F(),v("div",null,[f,b,a("div",D,[_,o(p,{type:"primary",loading:i.value,onClick:l},{default:c(()=>[t(u(i.value?"等待请求中...":"模拟请求"),1)]),_:1},8,["loading"])]),A])}}}),N=m(w,[["__scopeId","data-v-231d18ed"]]);export{j as __pageData,N as default};
