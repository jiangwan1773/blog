import{a as u}from"./chunks/theme.C1mTzYq5.js";import{_ as A,f as r,H as c,k as v,N as g,U as l,F as y,a1 as C,al as D,a0 as B,G as E,K as p,L as m,O as _,V as b,W as x}from"./chunks/framework.Dt0boiFn.js";const F=["jpg","jpeg","png","gif"],o=".jpg、.jpeg、.png、.gif";function I(){return new Promise((i,a)=>{j({multiple:!0,accept:"image/*",typeArr:F}).then(s=>{w(s,F)?i(s):(u.info(`上传文件类型需满足${o}`),a(`上传文件类型需满足${o}`))}).catch(s=>{a(s)})})}function j(i={}){return new Promise((a,s)=>{const n={accept:"*",typeArr:[],multiple:!1,size:10240,limit:5,...i},t=document.createElement("input");t.type="file",t.multiple=n.multiple,t.accept=n.accept,t.style.width="0",t.style.height="0",document.body.appendChild(t),t.click(),t.oninput=d=>{const h=[...d.target.files];L(h,n).then(()=>{a(h)}).catch(k=>{u.error(k),s(k)})},window.addEventListener("focus",()=>{setTimeout(()=>{t.value||(document.body.removeChild(t),s("用户取消上传"))},500)},{once:!0})})}function w(i,a=[]){const s=Array.from(i);let n=[];s.forEach(h=>{n.push(P(h))});const t=n.filter(h=>a.includes(h));return n.length===t.length}function P(i){var a;return(a=i.name.split(".")[i.name.split(".").length-1])==null?void 0:a.toLowerCase()}function L(i,a){return new Promise((s,n)=>{if(i.length>a.limit)return n(`上传数量超过${a.limit}个`);s("校验通过")})}const f=i=>(b("data-v-c7a040f3"),i=i(),x(),i),T=f(()=>l("h1",{id:"函数式封装上传图片组件",tabindex:"-1"},[p("函数式封装上传图片组件 "),l("a",{class:"header-anchor",href:"#函数式封装上传图片组件","aria-label":'Permalink to "函数式封装上传图片组件"'},"​")],-1)),V=f(()=>l("blockquote",null,[l("p",null,[p("Vue3 + ts函数式封装支持 "),l("code",null,"函数式｜组件"),p(" 两种使用方式")])],-1)),$=f(()=>l("h2",{id:"演示",tabindex:"-1"},[p("演示 "),l("a",{class:"header-anchor",href:"#演示","aria-label":'Permalink to "演示"'},"​")],-1)),S={class:"for-box"},M=["src"],N=D("",4),Y=JSON.parse('{"title":"函数式封装上传图片组件","description":"在vue中使用函数式封装上传图片组件","frontmatter":{"title":"函数式封装上传图片组件","description":"在vue中使用函数式封装上传图片组件","head":[["meta",{"name":"keywords","content":"封装 上传图片"}]]},"headers":[],"relativePath":"web/vue/uploadImage/index.md","filePath":"web/vue/uploadImage/index.md","lastUpdated":1718388935000}'),G={name:"web/vue/uploadImage/index.md"},O=Object.assign(G,{setup(i){const a=r([]),s=r(!1);function n(){s.value=!0,I().then(d=>{const h=[];d.forEach(k=>{const e=URL.createObjectURL(k);h.push(e)}),a.value=[...a.value,...h]}).finally(()=>{s.value=!1})}function t(){a.value.length=0}return(d,h)=>{const k=B("a-button");return E(),c("div",null,[T,V,$,v(k,{type:"primary",onClick:n,loading:s.value,style:{"margin-right":"10px"}},{default:g(()=>[p(m(s.value?"上传中...":"上传"),1)]),_:1},8,["loading"]),v(k,{type:"primary",onClick:t},{default:g(()=>[p("清空图片")]),_:1}),l("div",S,[(E(!0),c(y,null,C(a.value,e=>(E(),c(y,{key:e},[e?(E(),c("img",{key:0,src:e,class:"show-img"},null,8,M)):_("",!0)],64))),128))]),N])}}}),q=A(O,[["__scopeId","data-v-c7a040f3"]]);export{Y as __pageData,q as default};
